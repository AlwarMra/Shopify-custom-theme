$(document).ready(function(){$("#shopify-section-anouncement").addClass("sticky"),$("#shopify-section-header").addClass("sticky");var a=window.n_rotation;window.rotate&&!function t(e){$(".banner_"+e).addClass("anim"),setTimeout(function(){$(".banner_"+e).removeClass("anim"),t(e=a<++e?1:e)},window.rotation_secs)}(1),$(".indice").click(function(t){t.preventDefault(),$("html, body").animate({scrollTop:$("#letra_"+$(this).data("rel")).offset().top-150},1e3)}),$("#in_search_marcas").keyup(function(t){$(".letter-title").hide();var e=$(this).val();$(".marca_title").each(function(){0<=$(this).data("rel").indexOf(e)?($(this).show(),$("#letra_"+$(this).data("inicial")).show()):$(this).hide()})}).click(function(){""==$(this).val()&&$(".marca_title,.letter-title").show()});var t;"iOS"==(t=navigator.userAgent,/android/i.test(t)?"Android":/iPad|iPhone|iPod/.test(t)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints?"iOS":"Other")&&$(".minicart-buttons-box").css("padding-bottom","5rem");/constructor/i.test(window.HTMLElement)||(!window.safari||"undefined"!=typeof safari&&window.safari.pushNotification).toString();$(".submenu-lateral-header").click(function(t){window.innerWidth<=870&&(t.preventDefault(),$(".submenu-lateral").removeClass("submenu-lateral-show"),$(".navigation").removeClass("main-menu-hide"))}),$(".open-submenu").click(function(t){window.innerWidth<=870&&(t.preventDefault(),t=$(this).data("menu"),$(".navigation").addClass("main-menu-hide"),$(".submenu-lateral[data-menu='"+t+"']").addClass("submenu-lateral-show"))});$(".main-product-carousel").flickity({lazyLoad:!0});function e(e){$(document).mouseup(function(t){$(e).removeClass("open")})}window.addEventListener("resize",isMobile,isDesktop),4<=$(".reviews .card-review").length&&($(".reviews").removeClass("reviews-flex").addClass("reviews-carousel"),$(".reviews-carousel").flickity({watchCSS:!0,groupCells:3,wrapAround:!0,autoPlay:!0,pageDots:!1,draggable:!1})),$(".blog-slider-cards").flickity({watchCSS:!0,wrapAround:!0,pageDots:!1,prevNextButtons:!1,autoPlay:!0}),$(".social-slider").flickity({watchCSS:!0,wrapAround:!0,groupCells:2,pageDots:!1}),$(".home-col-slider").flickity({wrapAround:!0}),$(".upsell-section .most-sold").flickity({pageDots:!1,cellAlign:"center",groupCells:!0}),$("#info-toggle").on("click touchstart",function(t){t.preventDefault();let e=$("#info-toggle .show-info-text");$("#info-toggle svg").toggleClass("rotate"),e.text(e.text()==DT.str.Ver_mas_sobre_el_perfume?DT.str.Ver_menos_sobre_el_perfume:DT.str.Ver_mas_sobre_el_perfume),$("#toggle-text").hasClass("toggled")?($("#toggle-text-2").css("display","block").animate({opacity:1},1e3),$(".fade").css("background","none"),$("#toggle-text").animate({"max-height":"2500px"}).removeClass("toggled")):($("#toggle-text-2").hide(),$("#toggle-text").animate({"max-height":"60vh"}).addClass("toggled"),$(".fade").css("background","linear-gradient(to bottom, rgba(255,255,255,0) 0%,rgba(251,251,251,1) 75%)"))}),$("#btn_show_desc").click(function(t){t.preventDefault(),$(this).hasClass("open")?($(".panel").removeClass("open"),$(this).removeClass("open"),$("#btn_show_desc_text").removeClass("open")):($(".panel").addClass("open"),$(this).addClass("open"),$("#btn_show_desc_text").addClass("open"))}),$(".filter-family").click(function(t){$(".oldfactory-cards").hasClass("open")?$(".oldfactory-cards").removeClass("open"):$(".oldfactory-cards").addClass("open")}),$(".filter-family-open").click(function(t){$(".brands-cards").hasClass("open")?$(".brands-cards").removeClass("open"):$(".brands-cards").addClass("open")}),e(".oldfactory-cards"),e(".brands-cards");var o=!0;function n(t){t.preventDefault(),$("#search-col").val()&&""!=$("#search-col").val()?document.location="/search?q="+$("#search-col").val()+"&type=product":document.location="/search?q=&type=product"}function i(a,o){document.addEventListener("click",function(t){var e;t.target.matches(a+" .accordion-title")&&(t.target.parentElement.classList.contains("acc-active")?t.target.parentElement.classList.remove("acc-active"):(1==o&&(e=document.querySelectorAll(a+" .accordion-container"),Array.prototype.forEach.call(e,function(t){t.classList.remove("acc-active")})),t.target.parentElement.classList.add("acc-active")))})}$(".filtering").click(function(t){t.preventDefault(),$(".toggle-content").toggleClass("open"),$(".toggle-order").removeClass("open"),o?$(".toggle-content").data("visible","true"):$(".toggle-content").data("visible",!1),o=!o}),$(".filter-order").click(function(t){t.preventDefault(),$(".toggle-order").toggleClass("open"),$(".toggle-content").removeClass("open")}),$(".button-filter").click(function(t){$(".toggle-content").removeClass("open")}),$("#btn_search").click(function(t){t.preventDefault(),$("#in_search").val()&&""!=$("#in_search").val()?document.location="/search?q="+$("#in_search").val()+"&type=product":document.location="/search?q=&type=product"}),$("#search-col").keypress(function(t){13==t.which&&n(t)}),$(".filter-search .select-icon").click(t=>n(t)),$(".border_image_h2").on("click touch",function(t){document.location=$(this).parent().find(".border_image").attr("href")}),$(".inCol").on("click",function(t){t.preventDefault(),$("html,body").animate({scrollTop:$(".this-col").offset().top-100},"slow")}),i(".overlay-tabs",!0),i(".home-accordion",!0),i(".accordion",!0);var r=$(".product-thumbnails img");function s(t){return Array.from({length:t},()=>String.fromCharCode(Math.floor(65536*Math.random()))).join("")}r.click(function(t){$(this).attr("data-video")?(r.removeClass("active"),$(this).addClass("active"),$(".main-img-container").hide(),$(".main-video").show()):(r.removeClass("active"),$(this).addClass("active"),t=t.currentTarget.src.replace("360x","600x"),$("#main-img").attr("src",t),$(".main-video").hide(),$(".main-img-container").show())}),$("#home-promo-code").on("click",function(){var t,e;t=$(this),e=$("<input>"),$("body").append(e),e.val($(t).text()).select(),document.execCommand("copy"),e.remove(),$(this).addClass("copied"),setTimeout(()=>{$(this).removeClass("copied")},2e3)}),$(".variant-btn").on("click",function(t){const e=$('.product-thumbnails img[data-image="'+$(this).data("image")+'"]');$(".variant-btn").removeClass("variant-selected"),$(this).addClass("variant-selected"),$("#variant").attr("value",$(this).data("id")),$("#variant").attr("data-free",$(this).data("free")),$("#variant").attr("data-compared",$(this).data("compared")),$(".product-price").hide(),$(".product-price[data-id="+$(this).data("id")+"]").show();var a=$(this).attr("data-free"),o=$(this).attr("data-id");$(".mainProd").attr("data-variant",o),$(".mainProd").attr("data-compared",$(this).attr("data-compared")),"true"==a?$(".mainProd").attr("data-free",$("#variant").attr("data-free-id")):$(".mainProd").attr("data-free","false"),1==e.length&&(a=e[0].src.replace("360x","600x"),$(".product-thumbnails img").removeClass("active"),e.addClass("active"),$("#main-img").attr("src",a))}),$("#editCustomer").on("submit",function(t){t.preventDefault();t=s(5),t="https://blacklabelparfum.com/sfapp/addmuestra/editCustomer/edit_customer.php?"+$(this).serialize()+"&p="+t;fetch(t,{credentials:"same-origin",method:"GET"}).then(function(t){t.text().then(function(t){$(".button-account").addClass("success-edit"),setTimeout(()=>{$(".button-account").removeClass("success-edit")},2e3)})})});var c=$("#modal-address-new"),l=$(".modal-address-put"),d=$('.button[data-action="open-modal"]'),u=$('.post-button[data-action="open-modal"]');function m(t,e){t.click(()=>{e.css("display","block")})}$(".close").click(()=>$("#modal-address-new").css("display","none")),$(".close").click(()=>$(".modal-address-put").css("display","none")),m(d,c),m(u,l),$(".form-item [data-action='toggle-recover-form']").on("click",function(t){t.preventDefault(),$("#customer_login").fadeOut(1e3,function(){$("#recover_customer_password").fadeIn(1e3)})}),$(".form-item [data-action=toggle-recover-form-login]").on("click",function(t){t.preventDefault(),$("#recover_customer_password").fadeOut(1e3,function(){$("#customer_login").fadeIn(1e3)})}),$("#createCustomer").on("submit",function(t){t.preventDefault();t=s(5),t="https://blacklabelparfum.com/sfapp/addmuestra/editCustomer/create_customer.php?"+$(this).serialize()+"&p="+t;fetch(t,{credentials:"same-origin",method:"GET"}).then(function(t){t.text().then(function(t){document.location="/account"})}).catch(function(t){alert(t.responseText)})})}),DT.mas_vendidos={n_pag:0,colecciones:[],init:function(t){console.log("[mas_vendidos]=\n",t),$(".btn_filtro_mas_vendidos").click(function(t){t.preventDefault(),$("#ul_filtros").find("li").removeClass("selected-item"),$(this).parent().addClass("selected-item"),DT.mas_vendidos.filtrar($(this).data("categoria"))}),DT.mas_vendidos.carousel(),"todos"!=t&&DT.mas_vendidos.filtrar(t)},carousel:function(){DT.isMobile()?$(".cards").flickity({freeScroll:!0,pageDots:!1,wrapAround:!0}):($(".cards").addClass("cards-carousel"),$(".cards").flickity({groupCells:!0,cellAlign:"left",pageDots:!1,draggable:!1,lazyLoad:!0,imagesLoaded:!0}))},filtrar:function(t){$(".carrusel-bloque").hide(),$("#MV_"+t).show(),$(".cards").flickity("resize")}},DT.mas_vendidos.init(window.mas_vendidos_params),DT.product={init:function(t){console.log("[PRODUCT] INIT =\n",t),this.applay_behaviors(),this.product_brothers()},applay_behaviors:function(){return $(".product-name.main").click(function(t){var e;(e=window.innerWidth<1024?$(".product-description").eq(0):$("#shopify-section-product-descripcion-extra")).length&&$("html, body").animate({scrollTop:e.offset().top-100},1e3)}),$("#btn_producto_leermas").click(function(t){t.preventDefault();t=$("#shopify-section-product-descripcion-extra");$("html, body").animate({scrollTop:t.offset().top-100},1e3)}),$(".btn_quantity").click(function(t){let e=+$(".dv_quantity").eq(0).text();t.preventDefault(),$(this).hasClass("trash")&&(e=1),$(this).hasClass("plus")&&(e+=1),$(this).hasClass("minus")&&1<e&&(e-=1),$(".dv_quantity").text("").text(e),$(".btn_quantity").attr("data-q",e),$(".button-add-p").attr("data-q",e),$(".add_muestra").attr("data-q",e),$("#variant").attr("data-q",e)}),window.innerWidth<768&&$("#sticky-cart").fadeIn(),$(document).on("scroll",function(){$(".general-product-form").length&&window.innerWidth<768&&($(".general-product-form").isInViewport()?$("#sticky-cart").fadeOut():$("#sticky-cart").fadeIn())}),!0},product_brothers:function(){var n=[],t=location.pathname+"?view=product-brothers-ajax";fetch(t,{credentials:"same-origin",method:"GET"}).then(function(t){t.text().then(function(t){t=replaceAll(t,",]","]");n=JSON.parse(t);for(var e=0;e<n.length;++e){var a=n[e].filter(t=>t.id!=productId);n[e]=a}!function(t){for(var t=[],e=[],a=0;a<n.length;++a){var o=n[a].filter(function(t){return 0<=t.tags.indexOf(categoria)});0<o.length?t[a]=o:t[a]=n[a];o=t[a].filter(function(t){return 0<=t.tags.indexOf(marca)});0<o.length&&(t[a]=o),0===a?(o=t[a].map(t=>({x:t,r:Math.random()})).sort((t,e)=>t.r-e.r).map(t=>t.x).slice(0,2),e.push(...o)):e.push(t[a][Math.floor(Math.random()*t[a].length)])}document.getElementById("product-brothers").innerHTML=function(t){var e=" ";return _.each(t,t=>e+=DT.cards.init(t)),e}(e),DT.wishlist.init(),$("#product-brothers").flickity({pageDots:!1,cellAlign:"center",groupCells:!0})}(n)})})}};const productTemplate=document.getElementById("product-template");productTemplate&&DT.product.init({product_handle:productTemplate.getAttribute("data-handle")});