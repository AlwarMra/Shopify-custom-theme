function pageTransition(t,a,i){var e=$("#Collection__Products");t=t||0,setTimeout(function(){e.addClass("loading")},200),setTimeout(function(){console.log("pageTransition",t),t&&($("html, body").stop().animate({scrollTop:0},1),F.go_to_page(t,i)),a&&($("html, body").stop().animate({scrollTop:0},1),F.filter_products_restrictivo(i)&&F.go_to_page(t,i),F.manage_reset_btn(i)),e.css("opacity",1)},700)}DT.colFilter={filtros:{},filtros_aplicados:[],all_tags:[],modo:"restrictivo",page:0,n_pages:0,search:!1,caducidad_segundos:60,page_size:!1,view_mode:"collection",paginacion:!1,sortBy:window.collection_sortby,products_to_show:[],init:function(t){console.log("=======[FILTROS]==============="),this.page_size=window.page_size,console.log("filter",this.page_size);var a=t.map(t=>t.tags.find(t=>t.includes("marca:"))),i=[...new Set(a)];i.sort();var e="";for(let t=0;i.length>t;t++)void 0!==i[t]&&(e+=`<a href="#" class="brand-card" data-brand="${i[t].replace("marca:","")}">
              <p class="brand-type">${i[t].replace("marca:","")}</p></a>`);$(".brand-card-container").html(e),F=this,F.add_behaviors(t),F.preparar_productos(t),F.preparar_filtros(t,!0),F.filter_products_restrictivo(t),this.html_pagina_original=$("#shopify-section-collection-cards").html(),this.html_search_original=$("#Collection__Products").html()},add_behaviors:function(a){console.log("FFFFFFFFFFF",a),console.log("[FILTROS] add_behaviors "),$(document).on("click",".btn_filtro_uso",function(t){t.preventDefault(),1===F.filtros.uso.length&&F.filtros.uso[0]===$(this).data("uso")?$(".btn_filtro_uso").removeClass("disabled").removeClass("active"):($(".btn_filtro_uso").removeClass("active"),$(this).addClass("active")),F.filter_products_restrictivo(a)}),$(document).on("click",".btn_filtro_categoria",function(t){t.preventDefault(),$(this).parent().hasClass("has_products")&&($(".btn_filtro_categoria").parent().removeClass("selected-item"),$(this).parent().addClass("selected-item"),F.filter_products_restrictivo(a))}),$(document).on("click",".odor-card",function(t){t.preventDefault(),$(this).hasClass("disabled")||($(this).hasClass("active")?$(this).removeClass("active"):($(".odor-card.active").removeClass("active"),$(this).addClass("active")),F.filter_products_restrictivo(a))}),$(document).on("click",".brand-card",function(t){t.preventDefault(),$(this).hasClass("disabled")||($(this).hasClass("active")?$(this).removeClass("active"):($(".brand-card.active").removeClass("active"),$(this).addClass("active")),F.filter_products_restrictivo(a))}),$(document).on("click",".order-card",function(t){t.preventDefault(),$(this).hasClass("active")?($(this).removeClass("active"),$("#order-value").attr("value","best-selling")):($(".order-card.active").removeClass("active"),$(this).addClass("active"),$("#order-value").attr("value",$(this).attr("data-order"))),F.filter_products_restrictivo(a)}),$(document).on("click",".intensity",function(t){t.preventDefault();t=$(this).data("intensity_level");if(console.log(".intensity",t),$(this).hasClass("intensity-selected"))return $(".intensity").removeClass("intensity-selected"),void F.filter_products_restrictivo(a);3==t&&$(".intensity").addClass("intensity-selected"),2==t&&($('.intensity[data-intensity_level="3"]').removeClass("intensity-selected"),$('.intensity[data-intensity_level="1"],.intensity[data-intensity_level="2"]').addClass("intensity-selected")),1==t&&($(".intensity").removeClass("intensity-selected"),$(this).addClass("intensity-selected")),F.filter_products_restrictivo(a)}),$(".subcollection").on("click",function(){$("#btn_limpiar").trigger("click"),$(this).hasClass("active")?($(".subcollection").removeClass("active"),$(".mother-col").addClass("active")):($(".subcollection").removeClass("active"),$(this).addClass("active")),F.filter_products_restrictivo(a)}),$(document).on("change",".season-checker",function(t){$(this).prop("checked")?$('.season-checker[data-estacion="'+$(this).data("estacion")+'"]').prop("checked",!0):$('.season-checker[data-estacion="'+$(this).data("estacion")+'"]').prop("checked",!1),setTimeout(function(){F.filter_products_restrictivo(a)},100)}),$(document).on("click",".Pagination__NavItem",function(t){t.preventDefault(),$(this).hasClass("is-current")||(console.log("page ->",$(this).data("page")),F.page=$(this).data("page"),pageTransition($(this).data("page")+"",!1,a))}),$(document).on("click","#btn_limpiar, .button-clean",function(t){t.preventDefault(),F.manage_reset_btn(a)}),$(document).on("click",".btn_reset_filtros",function(t){$(".Button-size-color").each(function(t){$(this).hasClass("active")&&$(this).trigger("click")})})},preparar_productos:function(t){window.show_unavailable_products||(t=_.where(t,{available:!0})),console.log("window.collection_products available->",t.length),_.each(t,function(i){i.familias_todas_arr=[],_.each(i.tags,function(t){var a=t.split(":");"familia"==a[0]&&(t=a[1],i.familias_todas_arr.push(t)),"subfamilia"!=a[0]&&"subfamilia2"!=a[0]||(a=a[1],i.familias_todas_arr.push(a))}),i.familias_todas_arr=_.uniq(i.familias_todas_arr)});var a=Math.ceil(t.length/F.page_size);return console.log("n_paginas",t.length,F.page_size,a),!0},preparar_filtros:function(a,t=0){$(".btn_filtro_uso,.odor-card-, .intensity").addClass("disabled"),$(".season-checker").parent().addClass("disabled"),$(".season-checker").parent().find(".num_estacion").text(""),F.search||(F.all_tags=[],F.filtros.categorias=[],F.filtros.familias_olfativas=[],F.filtros.uso=[],F.filtros.intensidad=[],F.filtros.estacion=[],F.filtros.marca=[],F.filtros.subcollection=[]),console.log("[preparar_filtros] productos",a.length,a),_.each(a,function(t){_.each(t.tags,function(t){var a;F.all_tags.indexOf(t)<0&&(0<t.indexOf(":")?(F.all_tags.push(t),"intensidad"==(a=t.split(":"))[0]&&F.filtros.intensidad.push(a[1]),"estacion"==a[0]&&F.filtros.estacion.push(a[1]),"marca"==a[0]&&F.filtros.marca.push(a[1]),"uso"==a[0]&&F.filtros.uso.push(a[1]),"familia"==a[0]&&F.filtros.familias_olfativas.push(a[1]),"subfamilia"!=a[0]&&"subfamilia2"!=a[0]||F.filtros.familias_olfativas.push(a[1].toLowerCase()),"categoria"==a[0]&&F.filtros.categorias.push(a[1])):"novedad"!=t&&"musthave"!=t&&"layering"!=t&&"packdemuestras"!=t||(F.all_tags.push(t),F.filtros.subcollection.push(t)))})}),$(".btn_filtro_categoria").each(function(){console.log("[filtrar->.btn_filtro_categoria]",$(this).data("categoria"),$(this).parent().hasClass("selected-item")),F.filtros.categorias.indexOf($(this).data("categoria"))<0&&"todos"!=$(this).data("categoria")&&(console.log("REMOVE:",$(this).data("categoria")),$(this).parent().hide()),$(this).data("categoria")==window.bg_collection&&$(this).parent().hide()}),_.each(F.filtros.categorias,function(t){t!=window.bg_collection&&$('.btn_filtro_categoria[data-categoria="'+t+'"]').removeClass("disabled").parent().addClass("has_products").show()}),_.each(F.filtros.uso,function(t){$('.btn_filtro_uso[data-uso="'+t+'"]').removeClass("disabled")}),F.filtros.familias_olfativas=_.uniq(F.filtros.familias_olfativas),$(".odor-card").addClass("disabled"),_.each(F.filtros.familias_olfativas,function(t){console.log("odor-card:",t,"has_products","true"),$('.odor-card[data-familia="'+t+'"]').removeClass("disabled")}),F.filtros.marca=_.uniq(F.filtros.marca),_.each(F.filtros.estacion,function(t){F.filtrar("estacion",t,a);$('.season-checker[data-estacion="'+t+'"]').parent().removeClass("disabled")}),_.each(F.filtros.intensidad,function(t){F.filtrar("intensidad",t,a);$('.intensity[data-intensity_level="'+t+'"]').removeClass("disabled")})},order(t){},filtrar(t,a,i){var e="subcollection"==t?a:t+":"+a;return _.filter(i,function(t){return 0<=t.tags.indexOf(e)})},filter_products_restrictivo:function(i){var a=i;console.log("----filter_products_restrictivo---------",a),DT.colFilter.filtros_aplicados=[];var e=0;$(".btn_filtro_uso").each(function(){var t;$(this).hasClass("active")&&(t=F.filtrar("uso",$(this).data("uso"),a),a=_.intersection(a,t),DT.colFilter.filtros_aplicados.push($(this).data("uso")),e++)}),console.log("[n productos USO]",a.length,a[1]),$(".subcollection").each(function(){var t;$(this).hasClass("active")&&"all"!=$(this).data("subcol")&&(t=F.filtrar("subcollection",$(this).data("subcol"),a),a=_.intersection(a,t),DT.colFilter.filtros_aplicados.push($(this).data("subcol")),e++)}),$(".btn_filtro_categoria").each(function(){var t;$(this).parent().hasClass("selected-item")&&"todos"!=$(this).data("categoria")&&(t=F.filtrar("categoria",$(this).data("categoria"),a),a=_.intersection(a,t),console.log("CATEGORIA",a),DT.colFilter.filtros_aplicados.push($(this).data("categoria")),e++)}),console.log("[n productos CATEGORIA]",a.length);var t=!1;$(".intensity").each(function(){$(this).hasClass("intensity-selected")&&(t=!0)}),t&&(a=(r=$(".intensity[data-intensity_level=3]").hasClass("intensity-selected")?F.filtrar("intensidad",3,a):$(".intensity[data-intensity_level=2]").hasClass("intensity-selected")?F.filtrar("intensidad",2,a):F.filtrar("intensidad",1,a),_.intersection(a,r)),DT.colFilter.filtros_aplicados.push("intensidad"),e++),console.log("[n productos INTENSITY]",a.length);var s=[];$(".odor-card").each(function(){var a,t;$(this).hasClass("active")&&(console.log("[.odor-card]",$(this).data("familia")),a=$(this).data("familia"),t=_.filter(i,function(t){return 0<=t.familias_todas_arr.indexOf(a)}),_.each(t,function(t){s.push(t)}),DT.colFilter.filtros_aplicados.push($(this).data("familia")),e++)}),0<s.length&&(a=_.intersection(a,s)),console.log("[n productos FAMILIAS OLFATIVAS]",a.length);var o=[];$(".brand-card").each(function(){var t;$(this).hasClass("active")&&(t=F.filtrar("marca",$(this).data("brand"),a),_.each(t,function(t){o.push(t)}),DT.colFilter.filtros_aplicados.push($(this).data("brand")),e++)}),0<o.length&&(a=_.intersection(a,o)),console.log("[n productos BRANDS]",a.length);var n=[];$(".season-checker").each(function(){var t;console.log("....> filtrar:",$(this).data("estacion"),$(this).prop("checked")),$(this).prop("checked")&&(t=F.filtrar("estacion",$(this).data("estacion"),a),_.each(t,function(t){n.push(t)}),DT.colFilter.filtros_aplicados.push($(this).data("estacion")),e++)}),n=_.uniq(n),console.log("prods_estaciones",n,a),0<n.length&&(a=_.intersection(a,n)),$(".order-card").each(function(){$(this).hasClass("active")&&e++});var r=document.getElementById("order-value").value;if("price-ascending"==r?(a=_.sortBy(a,function(t){return t.price})).reverse():"price-descending"==r?a=_.sortBy(a,function(t){return t.price}):"created-descending"==r?(a=_.sortBy(a,function(t){return t.created_at})).reverse():"created-ascending"==r&&(a=_.sortBy(a,function(t){return t.created_at})),console.log("QWERTY",a),F.preparar_filtros(a),$(".mas-vendidos-section").remove(),0==a.length){console.log("=====NO PRODUCTS TO SHOW====");var l=window.no_products_text.split("|"),r="",l='<div class="filters-sin-reslutados">'+(r=""!=window.image_no_results?'<img class="image_no_results" src="'+window.image_no_results+'">':r)+'<h2 class="section-title" style="font-size:.875rem; letter-spacing: 4.72px; text-transform: uppercase"><span>'+l[0]+'</span></h2><br><p style="text-transform: uppercase">'+l[1]+"</p></div>";return $("#Collection__Products").html(l).removeClass("loading"),void $(".panel-wrapper").hide()}if($(".panel-wrapper").show(),0==e)return console.log("--[  NO FILTROS    ]--",e,a.length),$("#shopify-section-collection-cards").html(DT.colFilter.html_pagina_original),void $("#Collection__Products").html(DT.colFilter.html_search_original);window.results=a,console.log("filtros",e,"window.results",window.results),this.get_pages(a);l=this.pagination(a,this.page);return this.paginacion=l,console.log("filter_products_restrictivo this.pages",this.pages,this.page,this.pages[this.page]),this.pages[this.page]||(this.page=0,this.pages[0]),console.log("------NEW dv_pagination--------"),$("#Collection__Products").html(this.format_products(this.pages[this.page])).append(this.get_paginacion(this.page,this.pages.length)),DT.wishlist.init(),$(".trustpilot-widget").each(function(t){var a=document.getElementById($(this).attr("id"));window.Trustpilot.loadFromElement(a)}),!0},format_products:function(t){var a=" ";return _.each(t,t=>a+=DT.cards.init(t)),a},get_pages:function(a){console.log("get_pages",a.length,this.page_size);var i=this.page_size,e=[],s=[],o=0;for(let t=0;a.length>t;t++)s.push(a[t]),++o==i&&(o=0,e.push(s),s=[]);return e.push(s),this.pages=e,!0},pagination:function(t,a){if(t.length>this.page_size){var i=Math.ceil(t.length/this.page_size),e=this.page*this.page_size,s=e+this.page_size;s>t.length&&(s=t.length);var o=this.page_size;window.results=[];var n=[],r=0;return _.each(t,function(t){n.push(t),++r==o&&(r=0,window.results.push(n),n=[])}),window.results.push(n),console.log("n_paginas",i,e,s,window.results),{n_paginas:i,index_ini:e,index_fin:s,productos:window.results[0]}}return!1},get_paginacion:function(t,a){var e='<div class="pagination">';if(console.log("[get_paginacion]",t,a),t=+t,a<=5)for(i=0;i<a;i++)i==t?e+=' <span class="pagination-item  is-active ">'+(i+1)+"</span>":e+=' <a href="#"  data-page="'+i+'" class="Pagination__NavItem pagination-item link" >'+(i+1)+"</a>";else{var s=t-1;s<0&&(s=0);var o=t+2;a<o&&(o=a),0==t&&(o=3);var n='<a class="Pagination__NavItem pagination-item link " rel="next" title="Navegar a la página siguiente"  data-page="'+(t+1)+'" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="7" height="10" viewBox="0 0 7 10"><g fill="none" fill-rule="evenodd">  <g fill="#57544F" stroke="#57544F">      <g>          <g>              <g>                  <path d="M315 10L324 10 319.5 16z" transform="translate(-536 -4214) translate(0 4139) translate(52) translate(168 67) rotate(-90 319.5 13)"></path>              </g>          </g>      </g>    </g> </g></svg></a>',r='<span class="pagination-item ">…</span>';for(0!=t&&(e+='<a class="pagination-item link" rel="prev" title="Navegar a la página anterior" data-page="'+(t-1)+' href="#"> <svg xmlns="http://www.w3.org/2000/svg" width="7" height="10" viewBox="0 0 7 10">      <g fill="none" fill-rule="evenodd">          <g fill="#57544F" stroke="#57544F">              <g>                  <g>                      <g>                          <path d="M5 10L14 10 9.5 16z" transform="translate(-226 -4214) translate(0 4139) translate(52) translate(168 67) matrix(0 -1 -1 0 22.5 22.5)"></path>                      </g>                  </g>              </g>          </g>      </g>   </svg></a>'),0<(s=t==a-1?t-2:s)&&3<t&&(e+='<a href="#"  data-page="0" class="Pagination__NavItem pagination-item link" >1</a>'+r),i=s;i<t;i++)e+=' <a href="#"  data-page="'+i+'" class="Pagination__NavItem pagination-item link" >'+(i+1)+"</a>";for(e+=' <span class="pagination-item  is-active ">'+(i+1)+"</span>",i=t+1;i<o;i++)e+=' <a href="#"  data-page="'+i+'" class="Pagination__NavItem pagination-item link" >'+(i+1)+"</a>";o<a-1&&(e+=r),o<a&&(e+=' <a href="#"  data-page="'+(a-1)+'" class="Pagination__NavItem pagination-item link" >'+a+"</a>"),o<a-1&&(e+=n)}return e+="</div>"},go_to_page:function(t,a){console.log("go_to_page>>",t),this.pages||this.get_pages(a),$("#Collection__Products").html(this.format_products(this.pages[t])).append(this.get_paginacion(t,this.pages.length)),DT.wishlist.init()},get_page_infinity:function(t,a){console.log("get_page_infinity>>",t),this.pages||this.get_pages(a),this.pages[t]&&($("#Collection__Products").append(this.format_products(this.pages[t])).removeClass("loading"),DT.wishlist.init())},load_products_ajax:function(){var a=[];_.each(F.filtros.marcas,function(t){a.push("marca:"+t)}),_.each(F.filtros.colores,function(t){a.push("color:"+t)}),_.each(F.filtros.estilos,function(t){a.push("estilo:"+t)});var t=location.pathname+"/"+a.join("+")+"?view=ajax";console.log("url",t),fetch(t,{credentials:"same-origin",method:"GET"}).then(function(t){t.text().then(function(t){console.log("DDDD",t)})})},manage_reset_btn(t){console.log("[FILTROS] limpiar "),$(".btn_filtro_uso").each(function(){$(this).hasClass("active")&&$(this).removeClass("active")}),$(".btn_filtro_categoria").each(function(){$(this).parent().hasClass("selected-item")&&"todos"!=$(this).data("categoria")&&$(this).parent().removeClass("selected-item")}),$('.btn_filtro_categoria[data-categoria="todos"]').parent().addClass("selected-item"),$(".intensity").each(function(){$(this).hasClass("intensity-selected")&&$(this).removeClass("intensity-selected")}),$(".odor-card").each(function(){$(this).hasClass("active")&&$(this).removeClass("active")}),$(".brand-card").each(function(){$(this).hasClass("active")&&$(this).removeClass("active")}),$(".order-card").each(function(){$(this).hasClass("active")&&$(this).removeClass("active"),$("#order-value").attr("value","best-selling")}),$(".season-checker").each(function(){$(this).prop("checked")&&$(this).prop("checked",!1)}),F.filter_products_restrictivo(t)},is_filtering:function(){var a=!1;return console.log("===================is_filtering============================"),that=this,_.each(that.filtros,function(t){console.log("fil",t),0<t.length&&(a=!0)}),a},load_filtered_page:function(){console.log("---load_filtered_page----")},getUrlParameter(t){for(var a=window.location.search.substring(1).split("&"),i=0;i<a.length;i++){var e=a[i].split("=");if(e[0]==t)return e[1]}}};